import { get_imported_files } from '../service/api';
import { format } from 'date-fns';
import { loadingToggle } from '../blocks/loading';
import { moduleOpen } from '../service/tools';
import { userCheck } from '../modules/user';

export function initLoaded() {
  document.getElementById('nav-loaded').addEventListener('click', loadedOpen);
}

export async function loadedOpen() {
  loadingToggle();
  await moduleOpen('./src/html/loaded.html').then(() => {
    initLoaded();
    loadedLoadFiles();
    loadingToggle();
  });
}

const testResult = {
  count: 285,
  results: [
    {
      id: 285,
      create_dt: '2025-03-21T19:53:34.060293+03:00',
      change_dt: '2025-03-21T19:53:34.060320+03:00',
      filename: '20230101_20250320_nomenclature_remains_expense.csv',
      log: '117610',
      status: 'success',
    },
    {
      id: 284,
      create_dt: '2025-03-14T08:25:04.539035+03:00',
      change_dt: '2025-03-14T08:25:04.539063+03:00',
      filename: '20250312_nomenclature_remains_expense.csv',
      log: '521',
      status: 'success',
    },
    {
      id: 283,
      create_dt: '2025-03-14T08:25:04.202638+03:00',
      change_dt: '2025-03-14T08:25:04.202665+03:00',
      filename: '20250311_nomenclature_remains_expense.csv',
      log: '521',
      status: 'success',
    },
    {
      id: 282,
      create_dt: '2025-03-14T08:25:03.860652+03:00',
      change_dt: '2025-03-14T08:25:03.860678+03:00',
      filename: '20250310_nomenclature_remains_expense.csv',
      log: '517',
      status: 'success',
    },
    {
      id: 281,
      create_dt: '2025-03-14T08:25:03.525056+03:00',
      change_dt: '2025-03-14T08:25:03.525084+03:00',
      filename: '20250309_nomenclature_remains_expense.csv',
      log: '519',
      status: 'success',
    },
    {
      id: 280,
      create_dt: '2025-03-14T08:25:03.199287+03:00',
      change_dt: '2025-03-14T08:25:03.199314+03:00',
      filename: '20250308_nomenclature_remains_expense.csv',
      log: '519',
      status: 'success',
    },
    {
      id: 279,
      create_dt: '2025-03-14T08:25:02.729245+03:00',
      change_dt: '2025-03-14T08:25:02.729272+03:00',
      filename: '20250307_nomenclature_remains_expense.csv',
      log: '517',
      status: 'success',
    },
    {
      id: 278,
      create_dt: '2025-03-14T08:25:02.399161+03:00',
      change_dt: '2025-03-14T08:25:02.399189+03:00',
      filename: '20250306_nomenclature_remains_expense.csv',
      log: '517',
      status: 'success',
    },
    {
      id: 277,
      create_dt: '2025-03-14T08:25:02.052627+03:00',
      change_dt: '2025-03-14T08:25:02.052653+03:00',
      filename: '20250305_nomenclature_remains_expense.csv',
      log: '517',
      status: 'success',
    },
    {
      id: 276,
      create_dt: '2025-03-14T08:25:01.712685+03:00',
      change_dt: '2025-03-14T08:25:01.712713+03:00',
      filename: '20250303_nomenclature_remains_expense.csv',
      log: '513',
      status: 'success',
    },
    {
      id: 275,
      create_dt: '2025-03-14T08:25:01.253064+03:00',
      change_dt: '2025-03-14T08:25:01.253091+03:00',
      filename: '20250302_nomenclature_remains_expense.csv',
      log: '513',
      status: 'success',
    },
    {
      id: 274,
      create_dt: '2025-03-14T08:25:00.910743+03:00',
      change_dt: '2025-03-14T08:25:00.910770+03:00',
      filename: '20250301_nomenclature_remains_expense.csv',
      log: '515',
      status: 'success',
    },
    {
      id: 273,
      create_dt: '2025-03-14T08:25:00.580037+03:00',
      change_dt: '2025-03-14T08:25:00.580063+03:00',
      filename: '20250228_nomenclature_remains_expense.csv',
      log: '520',
      status: 'success',
    },
    {
      id: 272,
      create_dt: '2025-03-14T08:25:00.253622+03:00',
      change_dt: '2025-03-14T08:25:00.253648+03:00',
      filename: '20250227_nomenclature_remains_expense.csv',
      log: '522',
      status: 'success',
    },
    {
      id: 271,
      create_dt: '2025-03-14T08:24:59.784671+03:00',
      change_dt: '2025-03-14T08:24:59.784698+03:00',
      filename: '20250223_nomenclature_remains_expense.csv',
      log: '518',
      status: 'success',
    },
    {
      id: 270,
      create_dt: '2025-03-14T08:24:59.472640+03:00',
      change_dt: '2025-03-14T08:24:59.472666+03:00',
      filename: '20250222_nomenclature_remains_expense.csv',
      log: '519',
      status: 'success',
    },
    {
      id: 269,
      create_dt: '2025-03-14T08:24:59.159016+03:00',
      change_dt: '2025-03-14T08:24:59.159044+03:00',
      filename: '20250221_nomenclature_remains_expense.csv',
      log: '521',
      status: 'success',
    },
    {
      id: 268,
      create_dt: '2025-03-14T08:24:58.846716+03:00',
      change_dt: '2025-03-14T08:24:58.846752+03:00',
      filename: '20250220_nomenclature_remains_expense.csv',
      log: '525',
      status: 'success',
    },
    {
      id: 267,
      create_dt: '2025-03-14T08:24:58.395257+03:00',
      change_dt: '2025-03-14T08:24:58.395283+03:00',
      filename: '20250219_nomenclature_remains_expense.csv',
      log: '526',
      status: 'success',
    },
    {
      id: 266,
      create_dt: '2025-03-14T08:24:58.080865+03:00',
      change_dt: '2025-03-14T08:24:58.080892+03:00',
      filename: '20250218_nomenclature_remains_expense.csv',
      log: '529',
      status: 'success',
    },
    {
      id: 265,
      create_dt: '2025-03-14T08:24:57.771735+03:00',
      change_dt: '2025-03-14T08:24:57.771762+03:00',
      filename: '20250217_nomenclature_remains_expense.csv',
      log: '524',
      status: 'success',
    },
    {
      id: 264,
      create_dt: '2025-03-14T08:24:57.465329+03:00',
      change_dt: '2025-03-14T08:24:57.465356+03:00',
      filename: '20250216_nomenclature_remains_expense.csv',
      log: '520',
      status: 'success',
    },
    {
      id: 263,
      create_dt: '2025-03-14T08:24:57.015535+03:00',
      change_dt: '2025-03-14T08:24:57.015561+03:00',
      filename: '20250215_nomenclature_remains_expense.csv',
      log: '521',
      status: 'success',
    },
    {
      id: 262,
      create_dt: '2025-03-14T08:24:56.700945+03:00',
      change_dt: '2025-03-14T08:24:56.700971+03:00',
      filename: '20250214_nomenclature_remains_expense.csv',
      log: '521',
      status: 'success',
    },
    {
      id: 261,
      create_dt: '2025-03-14T08:24:56.394745+03:00',
      change_dt: '2025-03-14T08:24:56.394771+03:00',
      filename: '20250213_nomenclature_remains_expense.csv',
      log: '521',
      status: 'success',
    },
    {
      id: 260,
      create_dt: '2025-03-14T08:24:56.078005+03:00',
      change_dt: '2025-03-14T08:24:56.078035+03:00',
      filename: '20250212_nomenclature_remains_expense.csv',
      log: '523',
      status: 'success',
    },
    {
      id: 259,
      create_dt: '2025-03-14T08:24:55.743702+03:00',
      change_dt: '2025-03-14T08:24:55.743732+03:00',
      filename: '20250312_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 258,
      create_dt: '2025-03-14T08:24:54.672901+03:00',
      change_dt: '2025-03-14T08:24:54.672926+03:00',
      filename: '20250311_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 257,
      create_dt: '2025-03-14T08:24:53.737515+03:00',
      change_dt: '2025-03-14T08:24:53.737542+03:00',
      filename: '20250310_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 256,
      create_dt: '2025-03-14T08:24:52.830316+03:00',
      change_dt: '2025-03-14T08:24:52.830346+03:00',
      filename: '20250309_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 255,
      create_dt: '2025-03-14T08:24:51.909133+03:00',
      change_dt: '2025-03-14T08:24:51.909159+03:00',
      filename: '20250308_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 254,
      create_dt: '2025-03-14T08:24:50.981431+03:00',
      change_dt: '2025-03-14T08:24:50.981459+03:00',
      filename: '20250307_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 253,
      create_dt: '2025-03-14T08:24:50.039595+03:00',
      change_dt: '2025-03-14T08:24:50.039622+03:00',
      filename: '20250306_norm_product_materials.csv',
      log: '3535',
      status: 'success',
    },
    {
      id: 252,
      create_dt: '2025-03-14T08:24:49.082616+03:00',
      change_dt: '2025-03-14T08:24:49.082644+03:00',
      filename: '20250305_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 251,
      create_dt: '2025-03-14T08:24:48.158684+03:00',
      change_dt: '2025-03-14T08:24:48.158713+03:00',
      filename: '20250303_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 250,
      create_dt: '2025-03-14T08:24:47.241808+03:00',
      change_dt: '2025-03-14T08:24:47.241838+03:00',
      filename: '20250302_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 249,
      create_dt: '2025-03-14T08:24:46.164003+03:00',
      change_dt: '2025-03-14T08:24:46.164029+03:00',
      filename: '20250301_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 248,
      create_dt: '2025-03-14T08:24:45.224160+03:00',
      change_dt: '2025-03-14T08:24:45.224187+03:00',
      filename: '20250228_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 247,
      create_dt: '2025-03-14T08:24:44.295190+03:00',
      change_dt: '2025-03-14T08:24:44.295220+03:00',
      filename: '20250227_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 246,
      create_dt: '2025-03-14T08:24:43.377387+03:00',
      change_dt: '2025-03-14T08:24:43.377414+03:00',
      filename: '20250223_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 245,
      create_dt: '2025-03-14T08:24:42.439648+03:00',
      change_dt: '2025-03-14T08:24:42.439676+03:00',
      filename: '20250222_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 244,
      create_dt: '2025-03-14T08:24:41.494588+03:00',
      change_dt: '2025-03-14T08:24:41.494614+03:00',
      filename: '20250221_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 243,
      create_dt: '2025-03-14T08:24:40.567875+03:00',
      change_dt: '2025-03-14T08:24:40.567901+03:00',
      filename: '20250220_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 242,
      create_dt: '2025-03-14T08:24:39.635862+03:00',
      change_dt: '2025-03-14T08:24:39.635888+03:00',
      filename: '20250219_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 241,
      create_dt: '2025-03-14T08:24:38.573799+03:00',
      change_dt: '2025-03-14T08:24:38.573827+03:00',
      filename: '20250218_norm_product_materials.csv',
      log: '3532',
      status: 'success',
    },
    {
      id: 240,
      create_dt: '2025-03-14T08:24:37.615052+03:00',
      change_dt: '2025-03-14T08:24:37.615081+03:00',
      filename: '20250217_norm_product_materials.csv',
      log: '3527',
      status: 'success',
    },
    {
      id: 239,
      create_dt: '2025-03-14T08:24:36.641340+03:00',
      change_dt: '2025-03-14T08:24:36.641368+03:00',
      filename: '20250216_norm_product_materials.csv',
      log: '3527',
      status: 'success',
    },
    {
      id: 238,
      create_dt: '2025-03-14T08:24:35.654099+03:00',
      change_dt: '2025-03-14T08:24:35.654130+03:00',
      filename: '20250215_norm_product_materials.csv',
      log: '3527',
      status: 'success',
    },
    {
      id: 237,
      create_dt: '2025-03-14T08:24:34.697193+03:00',
      change_dt: '2025-03-14T08:24:34.697219+03:00',
      filename: '20250214_norm_product_materials.csv',
      log: '3527',
      status: 'success',
    },
    {
      id: 236,
      create_dt: '2025-03-14T08:24:33.750637+03:00',
      change_dt: '2025-03-14T08:24:33.750664+03:00',
      filename: '20250213_norm_product_materials.csv',
      log: '3527',
      status: 'success',
    },
    {
      id: 235,
      create_dt: '2025-03-14T08:24:32.808901+03:00',
      change_dt: '2025-03-14T08:24:32.808930+03:00',
      filename: '20250212_norm_product_materials.csv',
      log: '3527',
      status: 'success',
    },
    {
      id: 234,
      create_dt: '2025-03-14T08:24:31.849963+03:00',
      change_dt: '2025-03-14T08:24:31.849992+03:00',
      filename: '20250313_nomenclature.csv',
      log: '663',
      status: 'success',
    },
    {
      id: 233,
      create_dt: '2025-03-14T08:24:31.551310+03:00',
      change_dt: '2025-03-14T08:24:31.551338+03:00',
      filename: '20250312_nomenclature.csv',
      log: '652',
      status: 'success',
    },
    {
      id: 232,
      create_dt: '2025-03-14T08:24:31.406532+03:00',
      change_dt: '2025-03-14T08:24:31.406560+03:00',
      filename: '20250311_nomenclature.csv',
      log: '641',
      status: 'success',
    },
    {
      id: 231,
      create_dt: '2025-03-14T08:24:31.269033+03:00',
      change_dt: '2025-03-14T08:24:31.269059+03:00',
      filename: '20250310_nomenclature.csv',
      log: '631',
      status: 'success',
    },
    {
      id: 230,
      create_dt: '2025-03-14T08:24:30.988567+03:00',
      change_dt: '2025-03-14T08:24:30.988595+03:00',
      filename: '20250309_nomenclature.csv',
      log: '631',
      status: 'success',
    },
    {
      id: 229,
      create_dt: '2025-03-14T08:24:30.836398+03:00',
      change_dt: '2025-03-14T08:24:30.836424+03:00',
      filename: '20250308_nomenclature.csv',
      log: '631',
      status: 'success',
    },
    {
      id: 228,
      create_dt: '2025-03-14T08:24:30.547828+03:00',
      change_dt: '2025-03-14T08:24:30.547853+03:00',
      filename: '20250307_nomenclature.csv',
      log: '631',
      status: 'success',
    },
    {
      id: 227,
      create_dt: '2025-03-14T08:24:30.407761+03:00',
      change_dt: '2025-03-14T08:24:30.407789+03:00',
      filename: '20250306_nomenclature.csv',
      log: '622',
      status: 'success',
    },
    {
      id: 226,
      create_dt: '2025-03-14T08:24:30.260670+03:00',
      change_dt: '2025-03-14T08:24:30.260698+03:00',
      filename: '20250305_nomenclature.csv',
      log: '621',
      status: 'success',
    },
    {
      id: 225,
      create_dt: '2025-03-14T08:24:29.961194+03:00',
      change_dt: '2025-03-14T08:24:29.961219+03:00',
      filename: '20250304_nomenclature.csv',
      log: '621',
      status: 'success',
    },
    {
      id: 224,
      create_dt: '2025-03-14T08:24:29.828864+03:00',
      change_dt: '2025-03-14T08:24:29.828889+03:00',
      filename: '20250303_nomenclature.csv',
      log: '621',
      status: 'success',
    },
    {
      id: 223,
      create_dt: '2025-03-14T08:24:29.696506+03:00',
      change_dt: '2025-03-14T08:24:29.696532+03:00',
      filename: '20250302_nomenclature.csv',
      log: '621',
      status: 'success',
    },
    {
      id: 222,
      create_dt: '2025-03-14T08:24:29.430653+03:00',
      change_dt: '2025-03-14T08:24:29.430680+03:00',
      filename: '20250301_nomenclature.csv',
      log: '621',
      status: 'success',
    },
    {
      id: 221,
      create_dt: '2025-03-14T08:24:29.300242+03:00',
      change_dt: '2025-03-14T08:24:29.300270+03:00',
      filename: '20250228_nomenclature.csv',
      log: '619',
      status: 'success',
    },
    {
      id: 220,
      create_dt: '2025-03-14T08:24:29.038407+03:00',
      change_dt: '2025-03-14T08:24:29.038432+03:00',
      filename: '20250227_nomenclature.csv',
      log: '619',
      status: 'success',
    },
    {
      id: 219,
      create_dt: '2025-03-14T08:24:28.907037+03:00',
      change_dt: '2025-03-14T08:24:28.907063+03:00',
      filename: '20250226_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 218,
      create_dt: '2025-03-14T08:24:28.775864+03:00',
      change_dt: '2025-03-14T08:24:28.775891+03:00',
      filename: '20250225_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 217,
      create_dt: '2025-03-14T08:24:28.491278+03:00',
      change_dt: '2025-03-14T08:24:28.491307+03:00',
      filename: '20250224_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 216,
      create_dt: '2025-03-14T08:24:28.349882+03:00',
      change_dt: '2025-03-14T08:24:28.349909+03:00',
      filename: '20250223_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 215,
      create_dt: '2025-03-14T08:24:28.212348+03:00',
      change_dt: '2025-03-14T08:24:28.212375+03:00',
      filename: '20250222_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 214,
      create_dt: '2025-03-14T08:24:27.942803+03:00',
      change_dt: '2025-03-14T08:24:27.942828+03:00',
      filename: '20250221_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 213,
      create_dt: '2025-03-14T08:24:27.807779+03:00',
      change_dt: '2025-03-14T08:24:27.807806+03:00',
      filename: '20250220_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 212,
      create_dt: '2025-03-14T08:24:27.677096+03:00',
      change_dt: '2025-03-14T08:24:27.677121+03:00',
      filename: '20250219_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 211,
      create_dt: '2025-03-14T08:24:27.404138+03:00',
      change_dt: '2025-03-14T08:24:27.404164+03:00',
      filename: '20250218_nomenclature.csv',
      log: '616',
      status: 'success',
    },
    {
      id: 210,
      create_dt: '2025-03-14T08:24:27.276905+03:00',
      change_dt: '2025-03-14T08:24:27.276930+03:00',
      filename: '20250217_nomenclature.csv',
      log: '606',
      status: 'success',
    },
    {
      id: 209,
      create_dt: '2025-03-14T08:24:27.014920+03:00',
      change_dt: '2025-03-14T08:24:27.014946+03:00',
      filename: '20250216_nomenclature.csv',
      log: '606',
      status: 'success',
    },
    {
      id: 208,
      create_dt: '2025-03-14T08:24:26.887135+03:00',
      change_dt: '2025-03-14T08:24:26.887162+03:00',
      filename: '20250215_nomenclature.csv',
      log: '606',
      status: 'success',
    },
    {
      id: 207,
      create_dt: '2025-03-14T08:24:26.758204+03:00',
      change_dt: '2025-03-14T08:24:26.758233+03:00',
      filename: '20250214_nomenclature.csv',
      log: '606',
      status: 'success',
    },
    {
      id: 206,
      create_dt: '2025-03-14T08:24:26.471848+03:00',
      change_dt: '2025-03-14T08:24:26.471875+03:00',
      filename: '20250213_nomenclature.csv',
      log: '606',
      status: 'success',
    },
    {
      id: 205,
      create_dt: '2025-03-14T08:24:26.340777+03:00',
      change_dt: '2025-03-14T08:24:26.340803+03:00',
      filename: '20250212_nomenclature.csv',
      log: '604',
      status: 'success',
    },
    {
      id: 204,
      create_dt: '2025-02-24T02:37:40.520260+03:00',
      change_dt: '2025-02-24T02:37:40.520276+03:00',
      filename: '20250117_norm_product_materials.csv',
      log: null,
      status: 'fail',
    },
    {
      id: 203,
      create_dt: '2025-02-24T02:37:40.420581+03:00',
      change_dt: '2025-02-24T02:37:40.420613+03:00',
      filename: '20250211_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 202,
      create_dt: '2025-02-24T02:37:40.196303+03:00',
      change_dt: '2025-02-24T02:37:40.196324+03:00',
      filename: '20250210_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 201,
      create_dt: '2025-02-24T02:37:40.065623+03:00',
      change_dt: '2025-02-24T02:37:40.065648+03:00',
      filename: '20250209_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 200,
      create_dt: '2025-02-24T02:37:39.830434+03:00',
      change_dt: '2025-02-24T02:37:39.830456+03:00',
      filename: '20250208_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 199,
      create_dt: '2025-02-24T02:37:39.721077+03:00',
      change_dt: '2025-02-24T02:37:39.721100+03:00',
      filename: '20250207_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 198,
      create_dt: '2025-02-24T02:37:39.607592+03:00',
      change_dt: '2025-02-24T02:37:39.607615+03:00',
      filename: '20250206_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 197,
      create_dt: '2025-02-24T02:37:39.391765+03:00',
      change_dt: '2025-02-24T02:37:39.391788+03:00',
      filename: '20250205_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 196,
      create_dt: '2025-02-24T02:37:39.275782+03:00',
      change_dt: '2025-02-24T02:37:39.275805+03:00',
      filename: '20250204_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 195,
      create_dt: '2025-02-24T02:37:39.166394+03:00',
      change_dt: '2025-02-24T02:37:39.166417+03:00',
      filename: '20250203_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 194,
      create_dt: '2025-02-24T02:37:38.926710+03:00',
      change_dt: '2025-02-24T02:37:38.926732+03:00',
      filename: '20250121_nomenclature.csv',
      log: null,
      status: 'success',
    },
    {
      id: 193,
      create_dt: '2025-02-24T02:35:42.070963+03:00',
      change_dt: '2025-02-24T02:35:42.070988+03:00',
      filename: '20250101_nomenclature.csv',
      log: null,
      status: 'fail',
    },
    {
      id: 192,
      create_dt: '2025-02-24T02:33:19.801681+03:00',
      change_dt: '2025-02-24T02:33:19.801705+03:00',
      filename: '20241211_nomenclature.csv',
      log: null,
      status: 'fail',
    },
    {
      id: 191,
      create_dt: '2025-02-22T02:26:23.372444+03:00',
      change_dt: '2025-02-22T02:26:23.372468+03:00',
      filename: '20250209_norm_product_materials.csv',
      log: null,
      status: 'success',
    },
    {
      id: 190,
      create_dt: '2025-02-22T02:26:22.587504+03:00',
      change_dt: '2025-02-22T02:26:22.587528+03:00',
      filename: '20250208_norm_product_materials.csv',
      log: null,
      status: 'success',
    },
    {
      id: 189,
      create_dt: '2025-02-22T02:26:21.824531+03:00',
      change_dt: '2025-02-22T02:26:21.824555+03:00',
      filename: '20250207_norm_product_materials.csv',
      log: null,
      status: 'success',
    },
    {
      id: 188,
      create_dt: '2025-02-22T02:26:20.956449+03:00',
      change_dt: '2025-02-22T02:26:20.956473+03:00',
      filename: '20250206_norm_product_materials.csv',
      log: null,
      status: 'success',
    },
    {
      id: 187,
      create_dt: '2025-02-22T02:26:20.201973+03:00',
      change_dt: '2025-02-22T02:26:20.201996+03:00',
      filename: '20250205_norm_product_materials.csv',
      log: null,
      status: 'success',
    },
    {
      id: 186,
      create_dt: '2025-02-22T02:26:19.440208+03:00',
      change_dt: '2025-02-22T02:26:19.440232+03:00',
      filename: '20250204_norm_product_materials.csv',
      log: null,
      status: 'success',
    },
  ],
  page_count: 3,
};

function loadedLoadFiles(page = 1) {
  if (!userCheck()) {
    return;
  }
  loadingToggle();

  /*
  loadedRowDraw(testResult.results);
  loadingToggle();
  */
  return get_imported_files(page)
    .then((response) => {
      const { page_count, results } = response.data;
      loadedRowDraw(results);
      loadedUpdateMore({
        page_count: page_count,
        page: Number(page) + 1,
      });
    })
    .finally(() => {
      loadingToggle();
    });
}

function loadedRowDraw(list) {
  const table = document.getElementById('loadedTable').querySelector('tbody');
  let template = '';
  for (const el of list) {
    template += `<tr>
          <td data-id="id">${el.id}</td>
          <td data-id="filename">${el.filename}</td>
          <td data-id="status">${el.status}</td>
          <td data-id="create_dt">${format(new Date(el.create_dt), 'dd.LL.yyy HH:mm')}</td>
          <td data-id="change_dt">${format(new Date(el.change_dt), 'dd.LL.yyy HH:mm')}</td>
        </tr>`;
  }
  table.insertAdjacentHTML('beforeend', template);
}

function loadedUpdateMore(request) {
  const { page_count, page } = request;
  const btn = document.getElementById('loadedMore');
  btn.dataset.page = page;
  if (page_count < page) {
    btn.disabled = true;
  }
}
